* Визуальная схема того, как будет работать на draw.io - [тут](https://viewer.diagrams.net/?highlight=0000ff&edit=_blank&layers=1&nav=1&title=Untitled%20Diagram.drawio#R7Vxbk%2BK2Ev41VOWcKijb8vWR6zlV2VQ2mYdknrYMGPCusYgtdpj8%2BiPJlt2SxdgMmJnZnEkFTFtupFZ36%2BsLO0DT%2Fek%2FWXjY%2FYLXUTKwjPVpgGYDyzIN16BvjPJcUFzLLQjbLF6Xg2rCQ%2Fx3JJ4sqcd4HeXSQIJxQuKDTFzhNI1WRKKFWYaf5GEbnMjfegi3UYPwsAqTJvWPeE12BdW3vJr%2B3yje7sQ3m25Q3NmHYnC5knwXrvETIKH5AE0zjElxtT9No4QJT8ileG5x5m41sSxKSZcHHrAxsz%2BRoRcbj7%2Bffp4E5NEally%2Bh8mxXPDv4XIZk19%2BKydNnoUk6PwP7HL1nMTpOsrQAE2edjGJHg7hit14ohpAaTuyT%2Bgnk14u8ZGOXH9aVoRw9W2bMeqvR0LZRCU9L%2FbddOh1OaMoI9Hp7FLNSoBU8yK8j0j2TIeIB4T2lEqHxB481VtoCs3cwe1DJTEs1WZb8a4lSy9K4V4gaKsh6IHlJvRrJ%2Bv4uyRo968jU4kJXT4Zhkm8TQdozDScLj7K6vv0alu%2Bcz75IUwFbZXhlITL0WqzFbfprOEIQOYTkKmHLNLOqd6%2F4QonOCtmNrDQhv%2Bxa8bEkG8aPvuvurmhcxtuwn2cPIshbrg%2F8JsI2fT9a0SWWRinObMjnOLGAP7QtLybc%2F2TuBf6xHhTazT8A2kTm2at8hpMzw7Xto4NvWv8W%2FP%2FYXegr1%2Fx8ku0jwndulFBYXvzJfpOdzMXc1hmmm3R7dbNJutcMtlNFu6j4qG3mq9pvWbCQbvyc00XVMXjZYX7Kn1Ui68rLXWWRJua2VVezLMlJ%2BY2fRgy3aYPC%2FpyYUjjwhSJRel6zA5ddkwkYZ7HK1lIxQPRunHmtsoki5KQxN%2Fl53RLLB%2F9jGPKsZIlCuQTQRVSjo%2FZKiofgoeowsc1VD4jR%2BZEwmwbkQYnKpbwGQw7sAF5Y0%2BqFb9%2Bm%2BzGNnXyROpO0j36FC4pmkOTLKL%2BNFzyW4Ze68vDCU2YxscUPo3LG%2Ft4vWYPTiSYVjKrwVGLoZzXxys05Spj8BpSnp9WuzDdMr%2FzE%2FUcVBz%2FakiVZDEdwuXR4k5u4D9UXXWdbiDI78uB%2BA2ZAQ38ksQ5idJKOYfM%2BVN1m1j8dT6gYvELypi%2FOgVlyN9MTprwa8RffU4x%2BLUlHqjGTAX3gq8HOYLBNn%2F1C6xRXrMxjvg4FUzoqwuYWGKAyT9OxDTgVxfPzgAHVFyPKryTLvMDOK%2FguatoVv%2Fq5FiyOtlGV1BtOj0plKlB1VSCwQLIFOqE100nFmCnzfJWvWFGQ%2FYiMjruk%2FGKYOgGuQv9jPOYxJi5wyUmBO81fpJgZcdwESBNq7jWuM02Ik%2FeRsfT4ArNLrp9eYXqCLgCV0SnmPzJZDRyyk%2BP4M7sVIqPf3gWH1I6%2Bz%2FFMPbhkXNAyp%2B4W3PhnyQ2n6MsptJgJyDYp3acQxfJgUe70yxgRast9A6cLO%2BVyMluY3QGON0KFlnNVAf3FXPgDRbgAICHz1gYvtY%2FVG5k%2BhFRFMhFvQGMEtnAjxlU%2BMEogH%2BSgldJqGtjDMro3QUZVhP%2Fdk0hfEATcd%2FURF6EzU1o%2BFM3XMtQTTNAEVCG8Le2ICXDJCyBzY3QiWMrp4SpAZmWDmQafeET1Mx7SCp9R3nfQMCeegy%2FAwEHF50BKWZlg8k6zHdVbg7IiNE%2Fh8z%2FpJxiGQzB5STD36oKjgXhnyHDP6cF73U9bTpANk%2B%2FU2AnHM1GCNqVh5elxAFILX10Pa6QEhc28gc9AztbA%2BzuoD5lxCFijEcYYjTiDVOEJT0GCl21rjhP3krtXKSonRpXdkZJvsJIhVt9q50m93BHrzU0RqwoIrku37ZfE6x%2BXFVGZ1LA%2F1fly1RZU9kp02hF6qxKU45BsOwLlMPzmyJhW92ei6QphEVFkAxD6wkItm0wrE6jnm1IYAVy2YoKe5kWtUVhcps4SRRS92BCB8jqsuCNQK%2FpWvoTFGIyW6PIVl%2BQzG4WkbhGjAGynZd6ISVFIPT1wTAbqAwEySbIr%2FiCVZeUTJGyXSi6AnjOwWuRxA2Aes3AfBa1RlL%2FBao48mKrLLIFV6qp8fwoaqlmilFTK7XutT%2BtdLRaOW7ZIrG9MzmLNwfKAosw4llJr42GGk4l1VPNwgLfomgxrCzB8oOiy1OolVIWsnbExWLn8opaYtDz9gonZoB1TV9lWIUMf1Tb8HxPso2gWVtlEO5%2BtuEETfRJodhD%2BRFnZIe3OA2TeU1VxFKP%2BYRZNYrvz9eIkOeyLTM8EqzUXfRB9AsoFN2jZiK8UiuAdM7EQpchw%2FNpVz3e8x3ZsQogeQ4f%2Bv6V4%2BXOUHpRzPimIFKsSZsmU4r7ZcpSbceKYd%2FX3Br49iBwTdCsFWsauJavLYmH%2BaEorG7iE7OBPtwCsjVITndmVsSbOwaBLd%2BfYzAt2TU4d3EN6F27BtMQXTrCdu2Xbd00lPSb8kBPxv5STlzt5Olg78LYrY9k7IHixt%2BBsTvNshxHyDM5MIetSUiGo7B3aSzFeWrTTADwXoW0p41nwffCfEHBoRxc9eVUUBlpgKUEXCv0rvBfgFnN5PX6IOFQxZqiaUtKSowBLIeg2pCkVE9gMWgF1S0rNWWhlXmSRjH1R4XTvtqUpIk1Tf%2BesabTrLryDIgF9BcBjUZge5V2ETnuHC9GnJFoJtO3NTYP7ernN8dlh0ph51%2FerMPs26%2BUTUx4jnhkODLR4tQbFR8DpbPBCTTbrCs%2B9taS6t6gqb1uPrM8D%2BbQR77b0oLWbxrd6wh1zlWErs2PtxUGu%2BbHvTeuMLqabOg589xHec5%2FUnibXs4XlPbFsoe2gl8u48ptHSo%2FrhNqJjjgzSaP%2BtkHTf7vYmOtApORV5X625IW9whMuhrruZrXrY31tcWshrGqjPo21g4dhXc1VucfaqyaUOQKY73MVusT%2BYJ%2B8H4PY6trI%2FedDuMPa98aYP6m9t3exfVj2vdlXXtt9o0cF1o4a28xgmu6Wej5Hkhg3LXf0vxR57zjtf34Z2oCnimbraew%2BCj2LzIF78b%2Bg3%2Bm%2FQv9ecvzXepYq3769c7tux%2F8HiiK8OpfuAdqB%2F697dt6X%2FbtnUlpfVz7ph%2Frf3WoGF7%2F201o%2Fj8%3D)
* Файлы листенеров и эмиттера лежат тут, это концепт, полурабочий

# Схема текстом
* Крон раз в n времени запускает скрипт-эмиттер с определенными параметрами: `php job_emitter.php cron_frame 5`
  * Первый параметр - имя очереди, куда попадет сообщение
  * Второй параметр - payload сообщения, его может не быть (он нужен только для cron_frame.php)
* Сообщения попадают в определенную очередь
* На эти очереди подписаны листенеры - Docker-контейнеры, у которых вместо entrypoint указан файл - листенер. 
  * Как будут запускаться листенеры - неважно: их можно включать и до и после отправки сообщений. Потом их можно либо выключать, либо оставлять "крутиться" в памяти (внутри них бесконечные циклы). Тут нужно просто в бою проверить, что будет удобнее (не будет ли течь память).
* Внутри листенеров есть колбеки, которые "реагирует" на пришедшее сообщение, а также есть бесконечный цикл, который берет сообщения из очереди 
